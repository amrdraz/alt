var ApplicationView = Ember.View.extend({
  didInsertElement: function () {

    $('#feedbackForm').click(function () {
      window.localStorage.setItem('feedback', 1);
      window.location.href = "https://docs.google.com/forms/d/1mZt4gf-lh-C1TrthBNI5KaL4chTsrcAJtWDv4aeW0fg/viewform";
    });

    function loadExample() {
        localStorage['DS.LSAdapter'] = '{"App.Lesson":{"records":{"am78g":{"id":"am78g","title":"Example Lesson","color":"rgb(160,199,113)","description":"<p style=\\"text-align: center;\\"><font size=\\"4\\"><br></font></p><p style=\\"text-align: center;\\"><font size=\\"4\\">This is a Lessons description, you can Edit the lesson by clicking on the Edit button next to the lesson\'s name.</font></p><p style=\\"text-align: center;\\"><font size=\\"4\\"><br></font></p><p style=\\"text-align: center;\\"><font size=\\"4\\">After clicking on Edit, you can edit this text by&nbsp;double clicking the text, double click on the text preview below to stop editing.</font></p><p style=\\"text-align: center;\\"><font size=\\"4\\"><br></font></p><p style=\\"text-align: center;\\"><font size=\\"4\\">You can change the lesson\'s&nbsp;name &nbsp;as well by double clicking&nbsp;it.</font></p><p style=\\"text-align: center;\\"><font size=\\"4\\"><br></font></p><p style=\\"text-align: center;\\"><font size=\\"4\\">If you mess things up beyond repair just go to the dashboard and remove the lesson , then refresh the page.</font></p><p style=\\"text-align: center;\\"><font size=\\"4\\"><br></font></p><p style=\\"text-align: center;\\"><font size=\\"4\\">Click on Start to continue.<span id=\\"sceditor-end-marker\\" class=\\"sceditor-selection sceditor-ignore\\" style=\\"line-height: 0; display: none;\\"> </span><span id=\\"sceditor-start-marker\\" class=\\"sceditor-selection sceditor-ignore\\" style=\\"line-height: 0; display: none;\\"> </span></font></p>","date":null,"scenes":["rrgc8","kq8c1","9aq44","d2ing","fpcnf"],"ueer":null}}},"App.Scene":{"records":{"rrgc8":{"id":"rrgc8","name":"Scene1","content":"<p style=\\"text-align: center; \\"><font size=\\"4\\">This is the first&nbsp;Scene, each lesson is&nbsp;comprised of&nbsp;scenes breaking down the lesson into interactive parts.</font></p><p style=\\"\\" class=\\"\\"><br></p><p style=\\"text-align: center;\\"><font size=\\"4\\"><br></font></p><p style=\\"text-align: center;\\"><font size=\\"4\\">Click on the interacton button&nbsp;<span id=\\"sceditor-end-marker\\" class=\\"sceditor-selection sceditor-ignore\\" style=\\"line-height: 0; display: none;\\"> </span><span id=\\"sceditor-start-marker\\" class=\\"sceditor-selection sceditor-ignore\\" style=\\"line-height: 0; display: none;\\"> </span>below to proceed</font></p>","lesson":"am78g","interaction":"sff0i"},"kq8c1":{"id":"kq8c1","name":"Scene two","content":"<p style=\\"text-align: center;\\"><fontsize=\\"5\\"><font size=\\"4\\">This&nbsp;Scene&nbsp;contains&nbsp;an assessment&nbsp;interaction&nbsp;unlik<spanid=\\"sceditor-end-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\"><spanid=\\"sceditor-start-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\">e&nbsp;the&nbsp;previous&nbsp;scene&nbsp;where&nbsp;the&nbsp;button&nbsp;just&nbsp;sends&nbsp;you&nbsp;to&nbsp;the&nbsp;next&nbsp;scene.</spanid=\\"sceditor-start-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\"></spanid=\\"sceditor-end-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\"></font></fontsize=\\"5\\"></p><p style=\\"text-align: center;\\"><pstyle=\\"text-align:center;\\"><br></pstyle=\\"text-align:center;\\"></p><p></p><p style=\\"text-align: center;\\"><pstyle=\\"text-align:center;\\"><font size=\\"4\\">This scene&nbsp;features&nbsp;a&nbsp;drag&nbsp;and&nbsp;drop&nbsp;interaction.</font></pstyle=\\"text-align:center;\\"></p><p style=\\"text-align: center;\\"><pstyle=\\"text-align:center;\\"><font size=\\"4\\"><br></font></pstyle=\\"text-align:center;\\"></p><p style=\\"text-align: center; \\"><pstyle=\\"text-align:center;\\"><font size=\\"4\\">Based&nbsp;on&nbsp;your&nbsp;choice&nbsp;the&nbsp;lesson&nbsp;will&nbsp;progress&nbsp;differently.</font></pstyle=\\"text-align:center;\\"></p><p style=\\"text-align: center; \\"><pstyle=\\"text-align:center;\\"><font size=\\"4\\"><br></font></pstyle=\\"text-align:center;\\"></p><p></p><p style=\\"text-align: center;\\"><pstyle=\\"text-align:center;\\"><font size=\\"4\\">This&nbsp;is&nbsp;useful&nbsp;for&nbsp;customizing&nbsp;the&nbsp;learning&nbsp;experience&nbsp;based&nbsp;on&nbsp;students\'<span id=\\"sceditor-end-marker\\" class=\\"sceditor-selection sceditor-ignore\\" style=\\"line-height: 0; display: none;\\"> </span><span id=\\"sceditor-start-marker\\" class=\\"sceditor-selection sceditor-ignore\\" style=\\"line-height: 0; display: none;\\"> </span> understanding.</font></pstyle=\\"text-align:center;\\"></p><p></p><p><pstyle=\\"text-align:center;\\"><br></pstyle=\\"text-align:center;\\"></p><p></p><p style=\\"text-align: center; \\"><pstyle=\\"text-align:center;\\"><fontsize=\\"4\\"><pstyle=\\"text-align:center;\\"><fontsize=\\"4\\"><pstyle=\\"text-align:center;\\"><fontsize=\\"4\\"><pstyle=\\"text-align:center;\\"><pstyle=\\"text-align:center;\\"><fontsize=\\"7\\"><font size=\\"7\\">Which recycle bin should we throw&nbsp;the&nbsp;chicken in?</font></fontsize=\\"7\\"></pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"></fontsize=\\"4\\"></pstyle=\\"text-align:center;\\"></fontsize=\\"4\\"></pstyle=\\"text-align:center;\\"></fontsize=\\"4\\"></pstyle=\\"text-align:center;\\"><br></p>","lesson":"am78g","interaction":"0mt87"},"9aq44":{"id":"9aq44","name":"Scene3","content":"<div style=\\"text-align: center;\\"><font size=\\"5\\">Right Answer<span id=\\"sceditor-end-marker\\" class=\\"sceditor-selection sceditor-ignore\\" style=\\"line-height: 0; display: none;\\"> </span><span id=\\"sceditor-start-marker\\" class=\\"sceditor-selection sceditor-ignore\\" style=\\"line-height: 0; display: none;\\"> </span></font></div><p></p><pstyle=\\"text-align:center;\\"><fontsize=\\"5\\"><spanid=\\"sceditor-end-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\"><spanid=\\"sceditor-start-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\"></spanid=\\"sceditor-start-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\"></spanid=\\"sceditor-end-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\"></fontsize=\\"5\\"></pstyle=\\"text-align:center;\\">","lesson":"am78g","interaction":"9p36b"},"d2ing":{"id":"d2ing","name":"Blue Bin Scene","content":"<div style=\\"text-align: center;\\"><br></div><div style=\\"text-align: center;\\"><font size=\\"4\\">Oh no,&nbsp;seems&nbsp;you&nbsp;picked&nbsp;the&nbsp;<fontcolor=\\"#cc3366\\"><font color=\\"#cc3366\\">wrong</font>&nbsp;Bin.</fontcolor=\\"#cc3366\\"></font></div><p></p><font size=\\"4\\"><pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"></font><div style=\\"text-align: center;\\"><font size=\\"4\\">Now&nbsp;maybe&nbsp;you&nbsp;should&nbsp;watch&nbsp;this&nbsp;short&nbsp;video.</font></div><font size=\\"4\\"><pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"></font><p></p><font size=\\"4\\"><pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"></font><div style=\\"text-align: center;\\"><font size=\\"4\\">The video is&nbsp;about&nbsp;a&nbsp;<fontcolor=\\"#33cc66\\"><font color=\\"#33cc66\\">recycling</font>&nbsp;campaign&nbsp;in&nbsp;Egypt.<span id=\\"sceditor-end-marker\\" class=\\"sceditor-selection sceditor-ignore\\" style=\\"line-height: 0; display: none;\\"> </span><span id=\\"sceditor-start-marker\\" class=\\"sceditor-selection sceditor-ignore\\" style=\\"line-height: 0; display: none;\\"> </span></fontcolor=\\"#33cc66\\"></font></div><pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"><p></p><pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"><div style=\\"text-align: center;\\"><br></div><pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"><div style=\\"text-align: center;\\"><iframe width=\\"560\\" height=\\"315\\" src=\\"http://www.youtube.com/embed/YknKtGIhFCo?wmode=opaque\\" data-youtube-id=\\"YknKtGIhFCo\\" frameborder=\\"0\\" allowfullscreen=\\"\\"></iframe><br></div><pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"><p></p><pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"><div style=\\"text-align: center;\\"><br></div><pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"><p></p><pstyle=\\"text-align:center;\\"><fontcolor=\\"#cc3366\\"><pstyle=\\"text-align:center;\\"><pstyle=\\"text-align:center;\\"><fontcolor=\\"#33cc66\\"><pstyle=\\"text-align:center;\\"><spanid=\\"sceditor-start-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\"><spanid=\\"sceditor-end-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\"><pstyle=\\"text-align:center;\\"><iframewidth=\\"560\\"height=\\"315\\"src=\\"http: www.youtube.com=\\"\\" embed=\\"\\" yknktgihfco?wmode=\\"opaque&quot;data-youtube-id=&quot;YknKtGIhFCo&quot;frameborder=&quot;0&quot;allowfullscreen=&quot;&quot;\\"></iframewidth=\\"560\\"height=\\"315\\"src=\\"http:></pstyle=\\"text-align:center;\\"></spanid=\\"sceditor-end-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\"></spanid=\\"sceditor-start-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\"></pstyle=\\"text-align:center;\\"></fontcolor=\\"#33cc66\\"></pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"></fontcolor=\\"#cc3366\\"></pstyle=\\"text-align:center;\\">","lesson":"am78g","interaction":"nbqpg"},"fpcnf":{"id":"fpcnf","name":"The End","content":"<div style=\\"text-align: center;\\"><pstyle=\\"text-align:center;\\"><fontsize=\\"7\\"><br></fontsize=\\"7\\"></pstyle=\\"text-align:center;\\"></div><div style=\\"text-align: center;\\"><pstyle=\\"text-align:center;\\"><fontsize=\\"7\\"><br></fontsize=\\"7\\"></pstyle=\\"text-align:center;\\"></div><pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"><div style=\\"text-align: center;\\"><font size=\\"7\\">End of the lesson.</font></div><div style=\\"\\" class=\\"\\"><spanid=\\"sceditor-end-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\"><spanid=\\"sceditor-start-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\"></spanid=\\"sceditor-start-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\"></spanid=\\"sceditor-end-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\"></div><pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"><p></p><pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"><div style=\\"text-align: center;\\">&nbsp;</div><pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"><p></p><pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"><div style=\\"text-align: center;\\"><font size=\\"3\\">Feel free to edit this lesson as you please, your changes can be seen only on your computer.</font></div><pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"><p></p><pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"><div style=\\"\\" class=\\"\\"><br></div><pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"><p></p><pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"><div style=\\"text-align: center;\\"><font size=\\"3\\">If you want to&nbsp;create&nbsp;more lessons, go to <a href=\\"http://0.0.0.0:3000/#/dashboard\\"><font color=\\"#66cc33\\"><b>Dashboard<span id=\\"sceditor-end-marker\\" class=\\"sceditor-selection sceditor-ignore\\" style=\\"line-height: 0; display: none;\\"> </span><span id=\\"sceditor-start-marker\\" class=\\"sceditor-selection sceditor-ignore\\" style=\\"line-height: 0; display: none;\\"> </span></b></font></a></font></div><pstyle=\\"text-align:center;\\"></pstyle=\\"text-align:center;\\"><p></p><pstyle=\\"text-align:center;\\"><fontsize=\\"7\\"><pstyle=\\"text-align:center;\\"><fontsize=\\"3\\"><spanid=\\"sceditor-end-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\"><spanid=\\"sceditor-start-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\"><pstyle=\\"text-align:center;\\"><fontsize=\\"5\\"><pstyle=\\"text-align:center;\\"><fontsize=\\"5\\"><pstyle=\\"text-align:center;\\"><fontsize=\\"5\\"><pstyle=\\"text-align:center;\\"><fontsize=\\"5\\"><ahref=\\"http: 0.0.0.0:3000=\\"\\" #=\\"\\" dashboard\\"=\\"\\"><fontcolor=\\"#66cc33\\"></fontcolor=\\"#66cc33\\"></ahref=\\"http:></fontsize=\\"5\\"></pstyle=\\"text-align:center;\\"></fontsize=\\"5\\"></pstyle=\\"text-align:center;\\"></fontsize=\\"5\\"></pstyle=\\"text-align:center;\\"></fontsize=\\"5\\"></pstyle=\\"text-align:center;\\"></spanid=\\"sceditor-start-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\"></spanid=\\"sceditor-end-marker\\"class=\\"sceditor-selectionsceditor-ignore\\"style=\\"line-height:0;display:none;\\"></fontsize=\\"3\\"></pstyle=\\"text-align:center;\\"></fontsize=\\"7\\"></pstyle=\\"text-align:center;\\">","lesson":"am78g","interaction":null}}},"App.Interaction":{"records":{"nbqpg":{"id":"nbqpg","name":"InteractionforBlueBinScene","type":"continue","scene":"d2ing","nextScene":"kq8c1","items":[],"targets":[]},"0mt87":{"id":"0mt87","name":"InteractionforScene2","type":"drag","scene":"kq8c1","nextScene":"kq8c1","items":["mrndc"],"targets":["umdli","1p9gp"]},"9p36b":{"id":"9p36b","name":"InteractionforScene3","type":"choose","scene":"9aq44","nextScene":"9aq44","items":[],"targets":["b35j7","hm37p","2a7d4","jvboa"]},"sff0i":{"id":"sff0i","name":"Interaction for Scene1","type":"continue","scene":"rrgc8","nextScene":"kq8c1","items":[],"targets":[]}}},"App.Target":{"records":{"umdli":{"id":"umdli","name":"organic","content":null,"color":"rgb(94,58,84)","image":"/images/green-trash-closed.png","hover":"/images/green-trash-open.png","value":null,"interaction":"0mt87","nextScene":"9aq44"},"1p9gp":{"id":"1p9gp","name":"nonorganic","content":null,"color":"rgb(167,121,84)","image":"/images/blue-trash-closed.png","hover":"/images/blue-trash-open.png","value":null,"interaction":"0mt87","nextScene":"d2ing"},"b35j7":{"id":"b35j7","name":"What if I chose the blue bin?","content":null,"color":"rgb(73,139,136)","image":"/images/green-trash-closed.png","hover":"/images/green-trash-open.png","value":null,"interaction":"9p36b","nextScene":"d2ing"},"hm37p":{"id":"hm37p","name":"Go back to previous scene","content":null,"color":"rgb(176,115,53)","image":"/images/green-trash-closed.png","hover":"/images/green-trash-open.png","value":null,"interaction":"9p36b","nextScene":"kq8c1"},"2a7d4":{"id":"2a7d4","name":"Go back to first scene","content":null,"color":"rgb(104,113,137)","image":"/images/green-trash-closed.png","hover":"/images/green-trash-open.png","value":null,"interaction":"9p36b","nextScene":"rrgc8"},"jvboa":{"id":"jvboa","name":"Finish this lesson","content":null,"color":"rgb(100,157,81)","image":"/images/green-trash-closed.png","hover":"/images/green-trash-open.png","value":null,"interaction":"9p36b","nextScene":"fpcnf"}}},"App.Item":{"records":{"mrndc":{"id":"mrndc","name":"chicken","image":"/images/composable/poultry.jpg","value":"umdli","interaction":"0mt87"}}}}';
        window.location.reload();
    }

    if (!localStorage['DS.LSAdapter']) {
        alert('Seems like this is your first time, we\'ll load a default Lesson to get you started.');
        loadExample();
    } else {


      window.onbeforeunload = (function () {
        if(!localStorage.getItem('feedback'))
            return "would you mind giving us some feedback before you leave?";
      });

        this.get('controller.store').find('lesson').then(function (lessons) {
            if(lessons.get('length')===0) {
                if(confirm("you removed all lessons, would you like us to reload the example lesson?")) {
                    loadExample();
                }
            }
        });
    }
  }
});

module.exports = ApplicationView;
